<% if @portfolio_entry.errors.any? %>
    <div id="error_explanation">
      <h2><%= pluralize(@portfolio_entry.errors.count, "error") %> prohibited this portfolio_entry from being
        saved:</h2>

      <ul>
        <% @portfolio_entry.errors.full_messages.each do |message| %>
            <li><%= message %></li>
        <% end %>
      </ul>
    </div>
<% end %>

<!-- Nav tabs -->
<ul class="nav nav-tabs tk-myriad-pro">
  <li class="active"><a href="#general" data-toggle="tab">General</a></li>
  <li><a href="#background" data-toggle="tab">Background</a></li>
  <li><a href="#tags" data-toggle="tab">Tags</a></li>
</ul>

<%= form_for(@portfolio_entry, :url => url_for([:admin, @portfolio_entry])) do |f| %>
    <div class="row" style="margin-bottom: 20px;">
      <div class="col-md-9 tk-myriad-pro">
        <div class="tab-content" style="padding-top: 20px;">
          <div class="tab-pane active" id="general">
            <div class="field">
              <%= f.label 'Title' %>
              <%= f.text_field :title %>
            </div>
            <div class="field">
              <%= f.label 'Platform' %>
              <%= f.collection_select(:portfolio_platform_id, PortfolioPlatform.all.order(:sortOrder), :id, :title, { :prompt => true }) %>
            </div>
            <div class="field">
              <%= f.label 'Role' %>
              <%= f.text_field :role %>
            </div>
            <div class="field">
              <%= f.label 'Overview' %>

              <ul class="nav nav-tabs tk-myriad-pro">
                <li class="active"><a href="#write" data-toggle="pill">Write</a></li>
                <li><a href="#preview" data-toggle="tab">Preview</a></li>
              </ul>


              <div class="tab-content" style="padding-top: 20px;">
                <div class="tab-pane active" id="write">
                  <div id="wmd-button-bar-overview"></div>
                  <%= f.text_area :overview, :id => 'wmd-input-overview', :class => 'wmd-input' %>
                </div>
                <div class="tab-pane" id="preview">
                  <div id="wmd-preview-overview" class="wmd-preview"></div>
                </div>
              </div>

            </div>
          </div>
          <div class="tab-pane" id="background">
            <div class="field">
              <%= f.label 'Background Image' %>
              <%= image_tag @portfolio_entry.project_image.url(:original), :style => 'width: 100%' %>
              <div class="well">
                <% if @portfolio_entry.project_image.exists? %>
                    <%= f.check_box(:project_image_delete) %> Delete?
                <% else %>
                    <%= f.file_field :project_image %>
                <% end %>
              </div>
            </div>
            <div class="field">
              <%= f.label 'Background Color' %>
              <%= f.text_field :backgroundColor %>
            </div>
          </div>
          <div class="tab-pane" id="tags">
            <div class="well">
              <%= collection_check_boxes(:portfolio_entry, :skill_tag_ids, SkillTag.all.order('LOWER(tag)'), :id, :tag) do |b|
                 content_tag(:div, :class => "form_checkbox_container") { b.check_box + ' ' + b.text }
              end %>
            </div>
          </div>
        </div>
      </div>
      <div class="col-md-3 tk-myriad-pro">
        <%= f.submit :class => 'btn btn-block btn-success btn-lg' %>
        <ul class="list-group">
          <li class="list-group-item">
            <%= f.label 'Sort Order' %>
            <%= f.number_field :sortOrder %>
          </li>
          <li class="list-group-item">
            <%= f.label 'Created' %>
            <%= @portfolio_entry.created_at %>
          </li>
          <li class="list-group-item">
            <%= f.label 'Last Updated' %>
            <%= @portfolio_entry.updated_at %>
          </li>
        </ul>
      </div>
    </div>
<% end %>
